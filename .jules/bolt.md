## 2026-02-02 - [Optimize dressColor N+1 query]
**Learning:** The `dressColor` method was performing a database query for every character in the input string. This N+1 pattern is common in this codebase (e.g., `bagColor`). Batching these queries using an `IN` clause and then mapping the results back to the original order in-memory is a significant performance win (reducing query count from N to 1). Using prepared statements also provides a secondary benefit of mitigating potential SQL injection vulnerabilities present in the original manual string interpolation.
**Action:** Always check loops for database queries and look for opportunities to batch them using `WHERE ... IN (...)` and associative arrays for O(1) in-memory lookups. Ensure the original response order and item count are preserved for API compatibility.
